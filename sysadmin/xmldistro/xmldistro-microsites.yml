# usage:
# ansible-playbook cp_ssl_crts.yml --extra-var "tld=foo.com" --inventory-file hosts --limit subblockofhosts --ask-become-pass
#
#INSIGHT_DEST= /u/ftpinsight/wurfl/wurfl.xml
---
- name: WURFL.xml distribution
  hosts: all
  remote_user: "{{ remote_user }}"

  tasks:
  - name: ssh | copying and decompressing WEEKLY.XML.GZ
    shell: ssh data "cat /u/data/snapshot/snapshot_releases/wurfl/weekly.xml.gz" | gzip -d > /tmp/wurfl.xml
  
  - name: Install | copying and chmod XML to insight ftp folder
    shell: install -p -m a+r,u+w /tmp/wurfl.xml /u/data/wurfl.xml
    sudo: yes
